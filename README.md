<div align="center">
	<p>
		<img alt="Thoughtworks Logo" src="https://raw.githubusercontent.com/twplatformlabs/static/master/psk_banner.png" width=800 />
	</p>
  <h1>ghcr.io/twplatformlabs/circleci-remote-docker</h1>
  <h3>PSK CircleCI Convenience Images</h3>
  <a href="https://app.circleci.com/pipelines/github/twplatformlabs/circleci-remote-docker"><img src="https://circleci.com/gh/twplatformlabs/circleci-remote-docker.svg?style=shield"></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/github/license/twplatformlabs/circleci-remote-docker"></a>
</div>
<br />

With inspiration from the CircleCI convenience images, `ghcr.io/twplatformlabs/circleci-remote-docker` maintains Alpine and Ubuntu variants with both remote and self-hosted runners in mind. As the name suggests, this image is designed to serve as a starter image for building a use-tailored CircleCI [remote docker executor](https://circleci.com/docs/2.0/custom-images/#section=configuration).  

>**Note:** This image was previously published to Dockerhub as twdps/circleci-remote-docker. For 2026, semantic release version will continue to be mirrored to Dockerhub. Starting in 2027, the PSK Circleci convenience images will only by published to ghcr.io.  

This image contains the [minimum packages required](https://circleci.com/docs/custom-images/) to function as a remote_docker executor on CircleCI.  

_difference with cimg libraries._ Enterprise settings often require specific security and configuration testing. The twplatformlabs series of convenience images is designed to demonstrate an effective, automated executor lifecycle architecture.  

**signature**. Images are signed using `cosign`. Verify images using the twplatformlabs [public key](https://raw.githubusercontent.com/twplatformlabs/static/master/cosign.pub).  
```bash
cosign verify --key cosign.pub ghcr.io/twplatformlabs/circleci-remote-docker:alpine-2025.04
```  
**provenance and bill of materials**. For each published image, a _provenance_ and _Software Bill of Materials_ is generated by buildx and added as an attestation. Use common tools for inspection.  

Or, use the [from-manifest.sh](from-manifest.sh) script from this repository to print json versions of either to stdout.  
```bash
bash from-manifest.sh TYPE IMAGE_REF

e.g.
$ bash from-manifest.sh provenance ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1
Pulling provenance from ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1 manifest
Digest reference: ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1@sha256:b86075...
Copied registry ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1@sha256:b860750...
Digest: sha256:b860750b20f684659a680ebf3593e43d090139e835961c364d148886edbdf487
{
  "_type": "https://in-toto.io/Statement/v0.1",
  "predicateType": "https://slsa.dev/provenance/v1",
  "subject": [
    {
      "name": "pkg:docker/ghcr.io/twplatformlabs/circleci-remote-docker@ubuntu-dev.865889b?platform=linux%2Farm64",
      "digest": {
        "sha256": "ce5238bc92eb7d66aed7a1ca1b75c4d9e65dfa3b968573d9351cbe77fb442f1c"
      }
    }
  ],
  "predicate": {
    "buildDefinition": {
      "buildType": "https://github.com/moby/buildkit/blob/master/docs/attestations/slsa-definitions.md",
      "resolvedDependencies": [
        {
          "uri": "pkg:docker/docker/buildkit-syft-scanner@stable-1",
          "digest": {
            "sha256": "490c3821680b55fe995766f7f22db4e6566ccef41c4cea13b370c4384d7eb3f2"
          }
        },
        {
          "uri": "pkg:docker/ubuntu@24.04?platform=linux%2Farm64",
          "digest": {
            "sha256": "cd1dba651b3080c3686ecf4e3c4220f026b521fb76978881737d24f200828b2b"
          }
        }
      ],
      "externalParameters": {
        "configSource": {
          "path": "Dockerfile.ubuntu"
        },
        "request": {
          "frontend": "dockerfile.v0",
          "args": {
            "build-arg:BUILDKIT_CONTEXT_KEEP_GIT_DIR": "1",
            "build-arg:BUILDKIT_SBOM_SCAN_CONTEXT": "1",
            "build-arg:BUILDX_EXPERIMENTAL": "1",
...

$ bash from-manifest.sh sbom ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1
Pulling sbom from ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1 manifest
Digest reference: ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1@sha256:b8607...
Copied registry ghcr.io/twplatformlabs/circleci-remote-docker:ubuntu-2026.01.1@sha256:b86075...
Digest: sha256:b860750b20f684659a680ebf3593e43d090139e835961c364d148886edbdf487
{
  "_type": "https://in-toto.io/Statement/v0.1",
  "predicateType": "https://spdx.dev/Document",
  "subject": [
    {
      "name": "pkg:docker/ghcr.io/twplatformlabs/circleci-remote-docker@ubuntu-dev.865889b?platform=linux%2Famd64",
      "digest": {
        "sha256": "70e1aa46a003339379d42a3f9b3ea23fd1b91736432612c4ec255224ececfb12"
      }
    }
  ],
  "predicate": {
    "spdxVersion": "SPDX-2.3",
    "dataLicense": "CC0-1.0",
    "SPDXID": "SPDXRef-DOCUMENT",
    "name": "sbom",
    "documentNamespace": "https://anchore.com/syft/dir/sbom-fa5d5bf3-acc7-4e3f-b4d5-ec599794a2ba",
    "creationInfo": {
      "licenseListVersion": "3.27",
      "creators": [
        "Organization: Anchore, Inc",
        "Tool: syft-v1.40.0",
        "Tool: buildkit-v0.26.3"
      ],
      "created": "2026-01-26T22:05:00Z"
    },
    "packages": [
      {
        "name": "adduser",
        "SPDXID": "SPDXRef-Package-deb-adduser-98299e49069387ec",
        "versionInfo": "3.137ubuntu1",
        "supplier": "NOASSERTION",
        "downloadLocation": "NOASSERTION",
        "filesAnalyzed": true,
...
```

**Other images in this series**  

twplatformlabs/circleci-base-image  
twplatformlabs/circleci-executor-builder  
twplatformlabs/circleci-infra-aws  
twplatformlabs/circleci-infra-gcp  
twplatformlabs/circleci-kube-ops

## Table of Contents

- [Table of Contents](#table-of-contents)
- [Getting Started](#getting-started)
- [What is Included in the Image](#what-is-included-in-the-image)
	- [Tagging Scheme](#tagging-scheme)
- [Contributing](#contributing)
	- [Local development](#local-development)
	- [Publishing Official Images (for Maintainers only)](#publishing-official-images-for-maintainers-only)
- [Additional Resources](#additional-resources)

## Getting Started

This image is intended to be used as the FROM image in a custom CircleCI remote docker executor.  

For example:

```Dockerfile
FROM ghcr.io/twplatformlabs/circleci-remote-docker:2025.04  

ENV NODE_VERSION=12.16.3

RUN curl -L -o node.tar.xz "https://nodejs.org/dist/v${NODE_VERSION}/node-v${NODE_VERSION}-linux-x64.tar.xz" && \
	sudo tar -xJf node.tar.xz -C /usr/local --strip-components=1 && \
	rm node.tar.xz && \
	sudo ln -s /usr/local/bin/node /usr/local/bin/nodejs
```

The tag `2025.04` indicates that the image was created in April 2025. Monthly, automated image builds occur on the 5th of each month.  

## What is Included in the Image

Two flavors of this image are maintained, both amd64 and arm64 architectures:  

- alpine:3
- ubuntu:24.04

Each contains the minimum requirements needed, as defined by CircleCI, to be used as a remote docker executor:  

- bash
- git
- openssh
- tar
- gzip
- ca-certificates

_Review the build and CVE scan logs in the release artifacts of the monthly build for specific package versions and known vulnerabilities (if any)._

### Tagging Scheme

This image has the following tagging scheme:

```
twdps/circleci-remote-docker:[alpine | ubuntu]-<YYYY.MM>
twdps/circleci-remote-docker:[alpine | ubuntu]-latest
twdps/circleci-remote-docker:[alpine | ubuntu]-dev.SHA:0:7
```

`-<YYYY.MM>` - Release version of the image, referred to by the four-digit year and two-digit month. For example, `2025.04` would be the April 2025 build. This image is generated on the 5th day of each month, pulling the current release of the base image and related packages and provides a predictable fixed point for use in an executor Dockerfile. Review the build log in the pipeline artifacts for the specific image and package versions. Occasionally, there will be interim patch released and you may see `YYYY.MM.1` or additional further numbered versions.  

`-latest` - generic tag that always points to the latest, monthly release image. Intended for use by other recurring builds and not recommended for normal executor Dockerfile usage. Pin custom executors to specific month-tagged base images.  

`-dev.SHA:0:7` - is the latest development of the Base image. Built from the `HEAD` of the `main` branch as part of continuous integration testing.  

## Contributing

We encourage [issues](https://github.com/twplatformlabs/circleci-remote-docker/issues) and [pull requests](https://github.com/twplatformlabs/circleci-remote-docker/pulls) against this repository. In order to value your time, here are some things to consider:  

1. Intended to be the minimum configuration necessary for an Alpine or Ubuntu based image to be successfully launched by CircleCI as a remote docker executor and intentionally does not include any other packages.  
1. PRs are welcome. Given the role of this image as a building block in building CircleCI remote docker executors, it is expected that PRs or Issues will be releated to bugs or compatible purpose issues. PR's to include additional packages will only be considered where necessary to continue supporting Alpine or Ubuntu linux as a remote docker starting point.  

## Additional Resources

- [CircleCI Docs](https://circleci.com/docs/)  
- [CircleCI Configuration Reference](https://circleci.com/docs/2.0/configuration-reference/#section=configuration)
